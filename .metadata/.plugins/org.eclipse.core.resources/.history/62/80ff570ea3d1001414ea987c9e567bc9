//============================================================================
// Name        : RomanToStringC++.cpp
// Author      : melalonso
// Version     :
// Copyright   : Your copyright notice
// Description : Methods for converting String number to integer value
//============================================================================

#include<iostream>
#include<sstream>

using namespace std;

#define NOT_FOUND -1
#define MIL 1000
#define MILLON 1000000
#define BILLON 1000000000

string units[9]={"uno","dos","tres","cuatro","cinco","seis","siete","ocho","nueve"};
string teens[9]={"once","doce","trece","catorce","quince","diecis√©is","diecisiete","dieciocho","diecinueve"};
string twenties[9]={"ventiuno","ventidos","ventitres","veinticuatro","veinticinco","veintiseis","veintisiete","ventiocho","ventinueve"};
string tens[9]={"diez","veinte","treinta","cuarenta","cincuenta","sesenta","setenta","ochenta","noventa"};
string hundreds[9]={"ciento","doscientos","trescientos","cuatrocientos","quinientos","seiscientos","setecientos","ochocientos","novecientos"};



long findWordValue(string w){
	for (int i =0;i<10;i++){
		if (w==units[i]) return i+1;
		else if (w==teens[i]) return 10+i+1;
		else if (w==tens[i]) return 10*(i+1);
		else if (w==twenties[i]) return 20+(i+1);
		else if (w==hundreds[i]) return 100*(i+1);
		else if (w=="y") return 0;
	}
	return NOT_FOUND;
}

bool isSeparator(string w){
	return w=="mil" || w=="millon" || w=="millones" ||
			w=="billon" || w=="billones";
}

long getSeparatorValue(string w){
	if (w=="mil") return MIL;
	else if (w=="millon" || w=="millones") return MILLON;
	else if (w=="billon" || w=="billones") return BILLON;
	else return NOT_FOUND;
}


long strToInt(string str){
	int acc,flag=0;
	long total=0;
	stringstream s(str);
	string w;
	while(s >> w){
		acc = 0;
		while(!isSeparator(w)){
            //cout << "Treating "<<w<<endl;
			acc += findWordValue(w);
			//cout << "Value of "<< w<< " is "<<acc<<endl;
			if (!(s >> w)){
                flag=1;
                break;
            }
		}
		if (flag) total += acc;
		else total += (acc * getSeparatorValue(w));
	}
	//cout << "Total es "<<total<<endl;

	return total;
}

/*
int main(){
	string numero = "cincuenta y cinco millones trescientos cuarenta y cinco mil trescientos dos";
	cout << strToInt(numero)<<endl;
}
*/



